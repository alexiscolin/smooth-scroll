var SmoothScroll=function(a={},b=null){this.DOM={},this.config={},this.move={},this.prlxItems=[],this.init(a,b)};SmoothScroll.prototype=function(){const a=function(q){q.preventDefault(),this.move.destY+=this.runFirefox&&1==q.deltaMode?q.deltaY*this.config.speed*this.config.multFirefox:q.deltaY*this.config.speed,h.call(this)},b=function(q){q.preventDefault(),this.move.destY+=q.wheelDeltaY?-1*q.wheelDeltaY:q.wheelDelta,h.call(this)},c=function(q){const r=q.targetTouches?q.targetTouches[0]:q;this.move.touchY=r.pageY},d=function(q){q.preventDefault();const r=q.targetTouches?q.targetTouches[0]:q;this.move.destY+=(r.pageY-this.move.touchY)*this.config.touchSpeed,this.move.touchY=r.pageY,h.call(this)},f=function(q){(38===q.keyCode||40===q.keyCode)&&q.preventDefault(),this.move.destY+=38===q.keyCode?-this.config.jump:40===q.keyCode?this.config.jump:0,h.call(this)},g=function(){this.move.destY=window.scrollY||window.pageYOffset,h.call(this)},h=function(){this.config.ticking||(this.rAF=requestAnimationFrame(i.bind(this)),this.config.ticking=!0)},i=function(){if(this.rAF=requestAnimationFrame(i.bind(this)),this.move.destY=Math.round(Math.max(0,Math.min(this.move.destY,this.config.scrollMax))),this.move.prevY!==this.move.destY){this.move.currentY+=(this.move.destY-this.move.currentY)*this.config.delay;const q=-this.move.currentY.toFixed(2);this.DOM.scroller.style.transform=this.enableSmoothScroll&&`translate3D(0,${q}px, 0)`,this.prlxItems&&this.prlxItems.update(q),this.move.prevY=Math.round(this.move.currentY)}else this.config.ticking=!1,cancelAnimationFrame(this.rAF)},j=function(q='bind'){const r='bind'===q?'addEventListener':'unbind'===q?'removeEventListener':null;if(null===r)throw'_domEvent function - wrong method! expect \'bind\' || \'unbind\' : got '+q;this.enableSmoothScroll?(this.deviceHasEvents.wheel&&document[r]('wheel',a.bind(this),!1),this.deviceHasEvents.mouseWheel&&document[r]('mousewheel',b.bind(this),!1),this.deviceHasEvents.keys&&document[r]('keydown',f.bind(this),!1),this.deviceHasEvents.touch&&(document[r]('touchstart',c.bind(this)),document[r]('touchmove',d.bind(this)))):this.config.parallax&&document[r]('scroll',g.bind(this))},k=function(){return this.config.fixedClass?this.DOM.container.classList.add(this.config.fixedClass):(this.DOM.container.style.overflow='hidden',this.DOM.container.style.height='100vh'),!0},l=function(){return{wheel:'onwheel'in document,mouseWheel:'onmousewheel'in document,touch:'ontouchstart'in document,keys:'onkeydown'in document}},n=function(){this.enableSmoothScroll&&k.call(this),j.call(this,'bind')},p=function(){this.config.scrollMax=this.DOM.scroller.offsetHeight-(document.documentElement.clientHeight||window.innerHeight)};return{init:function(q,r){this.DOM.scroller=document.querySelector('.js-scroller'),this.DOM.container=this.DOM.scroller.parentNode,this.config={delay:q.delay||.1,speed:q.speed||1,touchSpeed:q.touchSpeed||1.5,jump:q.jump||110,parallax:q.parallax||!1,touch:q.touch||!1,fixedClass:r||!1,multFirefox:15,scrollMax:0,ticking:!1},this.move={currentY:0,destY:0,prevY:0,touchY:0},this.runFirefox=-1<navigator.userAgent.indexOf('Firefox'),this.deviceHasEvents=l(),this.enableSmoothScroll=!this.deviceHasEvents.touch||this.config.touch,this.prlxItems=this.config.parallax?new Parallax:null,n.call(this),p.call(this)},resize:p,bindEvent:n,unbindEvent:function(){j.call(this,'unbind'),'undefined'!=typeof this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null)}}}();export{SmoothScroll};
